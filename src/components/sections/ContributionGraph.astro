---
interface ContributionDay {
    contributionCount: number;
    date: string;
}

interface Week {
    contributionDays: ContributionDay[];
}

interface Props {
    weeks?: Week[];
}

const { weeks } = Astro.props;

function getColor(count: number) {
    if (count === 0) return "bg-[#ebedf0]";
    if (count <= 3) return "bg-[#9be9a8]";
    if (count <= 6) return "bg-[#40c463]";
    if (count <= 9) return "bg-[#30a14e]";
    return "bg-[#216e39]";
}
---

<div class="w-full overflow-hidden flex justify-end">
    {
        weeks ? (
            <div class="flex gap-[2px]">
                {weeks.map((week) => (
                    <div class="flex flex-col gap-[2px]">
                        {week.contributionDays.map((day) => (
                            <div
                                class={`w-[10px] h-[10px] ${getColor(day.contributionCount)}`}
                                title={`${day.date}: ${day.contributionCount} contributions`}
                            />
                        ))}
                    </div>
                ))}
            </div>
        ) : (
            <div class="p-4 text-center border-2 border-dashed border-gray-300 text-gray-500">
                <p>No contribution data available.</p>
            </div>
        )
    }
</div>
